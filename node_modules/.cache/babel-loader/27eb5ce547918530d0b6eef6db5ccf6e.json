{"ast":null,"code":"import { onBeforeUnmount, watch, onMounted } from 'vue';\nvar SMOOTH_PTG = 14 / 15;\nexport default function useMobileTouchMove(inVirtual, listRef, callback) {\n  var touched = false;\n  var touchY = 0;\n  var element = null; // Smooth scroll\n\n  var interval = null;\n\n  var cleanUpEvents = function cleanUpEvents() {\n    if (element) {\n      element.removeEventListener('touchmove', onTouchMove);\n      element.removeEventListener('touchend', onTouchEnd);\n    }\n  };\n\n  var onTouchMove = function onTouchMove(e) {\n    if (touched) {\n      var currentY = Math.ceil(e.touches[0].pageY);\n      var offsetY = touchY - currentY;\n      touchY = currentY;\n\n      if (callback(offsetY)) {\n        e.preventDefault();\n      } // Smooth interval\n\n\n      clearInterval(interval);\n      interval = setInterval(function () {\n        offsetY *= SMOOTH_PTG;\n\n        if (!callback(offsetY, true) || Math.abs(offsetY) <= 0.1) {\n          clearInterval(interval);\n        }\n      }, 16);\n    }\n  };\n\n  var onTouchEnd = function onTouchEnd() {\n    touched = false;\n    cleanUpEvents();\n  };\n\n  var onTouchStart = function onTouchStart(e) {\n    cleanUpEvents();\n\n    if (e.touches.length === 1 && !touched) {\n      touched = true;\n      touchY = Math.ceil(e.touches[0].pageY);\n      element = e.target;\n      element.addEventListener('touchmove', onTouchMove, {\n        passive: false\n      });\n      element.addEventListener('touchend', onTouchEnd);\n    }\n  };\n\n  var noop = function noop() {};\n\n  onMounted(function () {\n    document.addEventListener('touchmove', noop, {\n      passive: false\n    });\n    watch(inVirtual, function (val) {\n      listRef.value.removeEventListener('touchstart', onTouchStart);\n      cleanUpEvents();\n      clearInterval(interval);\n\n      if (val) {\n        listRef.value.addEventListener('touchstart', onTouchStart, {\n          passive: false\n        });\n      }\n    }, {\n      immediate: true\n    });\n  });\n  onBeforeUnmount(function () {\n    document.removeEventListener('touchmove', noop);\n  });\n}","map":{"version":3,"names":["onBeforeUnmount","watch","onMounted","SMOOTH_PTG","useMobileTouchMove","inVirtual","listRef","callback","touched","touchY","element","interval","cleanUpEvents","removeEventListener","onTouchMove","onTouchEnd","e","currentY","Math","ceil","touches","pageY","offsetY","preventDefault","clearInterval","setInterval","abs","onTouchStart","length","target","addEventListener","passive","noop","document","val","value","immediate"],"sources":["/Users/cinder/Desktop/Psy+/psyplusweb/node_modules/ant-design-vue/es/vc-virtual-list/hooks/useMobileTouchMove.js"],"sourcesContent":["import { onBeforeUnmount, watch, onMounted } from 'vue';\nvar SMOOTH_PTG = 14 / 15;\nexport default function useMobileTouchMove(inVirtual, listRef, callback) {\n  var touched = false;\n  var touchY = 0;\n  var element = null; // Smooth scroll\n\n  var interval = null;\n\n  var cleanUpEvents = function cleanUpEvents() {\n    if (element) {\n      element.removeEventListener('touchmove', onTouchMove);\n      element.removeEventListener('touchend', onTouchEnd);\n    }\n  };\n\n  var onTouchMove = function onTouchMove(e) {\n    if (touched) {\n      var currentY = Math.ceil(e.touches[0].pageY);\n      var offsetY = touchY - currentY;\n      touchY = currentY;\n\n      if (callback(offsetY)) {\n        e.preventDefault();\n      } // Smooth interval\n\n\n      clearInterval(interval);\n      interval = setInterval(function () {\n        offsetY *= SMOOTH_PTG;\n\n        if (!callback(offsetY, true) || Math.abs(offsetY) <= 0.1) {\n          clearInterval(interval);\n        }\n      }, 16);\n    }\n  };\n\n  var onTouchEnd = function onTouchEnd() {\n    touched = false;\n    cleanUpEvents();\n  };\n\n  var onTouchStart = function onTouchStart(e) {\n    cleanUpEvents();\n\n    if (e.touches.length === 1 && !touched) {\n      touched = true;\n      touchY = Math.ceil(e.touches[0].pageY);\n      element = e.target;\n      element.addEventListener('touchmove', onTouchMove, {\n        passive: false\n      });\n      element.addEventListener('touchend', onTouchEnd);\n    }\n  };\n\n  var noop = function noop() {};\n\n  onMounted(function () {\n    document.addEventListener('touchmove', noop, {\n      passive: false\n    });\n    watch(inVirtual, function (val) {\n      listRef.value.removeEventListener('touchstart', onTouchStart);\n      cleanUpEvents();\n      clearInterval(interval);\n\n      if (val) {\n        listRef.value.addEventListener('touchstart', onTouchStart, {\n          passive: false\n        });\n      }\n    }, {\n      immediate: true\n    });\n  });\n  onBeforeUnmount(function () {\n    document.removeEventListener('touchmove', noop);\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}