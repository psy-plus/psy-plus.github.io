{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { computed } from 'vue'; // recursion (flat tree structure)\n\nfunction flatRecord(record, indent, childrenColumnName, expandedKeys, getRowKey, index) {\n  var arr = [];\n  arr.push({\n    record: record,\n    indent: indent,\n    index: index\n  });\n  var key = getRowKey(record);\n  var expanded = expandedKeys === null || expandedKeys === void 0 ? void 0 : expandedKeys.has(key);\n\n  if (record && Array.isArray(record[childrenColumnName]) && expanded) {\n    // expanded state, flat record\n    for (var i = 0; i < record[childrenColumnName].length; i += 1) {\n      var tempArr = flatRecord(record[childrenColumnName][i], indent + 1, childrenColumnName, expandedKeys, getRowKey, i);\n      arr.push.apply(arr, _toConsumableArray(tempArr));\n    }\n  }\n\n  return arr;\n}\n/**\n * flat tree data on expanded state\n *\n * @export\n * @template T\n * @param {*} data : table data\n * @param {string} childrenColumnName : 指定树形结构的列名\n * @param {Set<Key>} expandedKeys : 展开的行对应的keys\n * @param {GetRowKey<T>} getRowKey  : 获取当前rowKey的方法\n * @returns flattened data\n */\n\n\nexport default function useFlattenRecords(dataRef, childrenColumnNameRef, expandedKeysRef, getRowKey) {\n  var arr = computed(function () {\n    var childrenColumnName = childrenColumnNameRef.value;\n    var expandedKeys = expandedKeysRef.value;\n    var data = dataRef.value;\n\n    if (expandedKeys === null || expandedKeys === void 0 ? void 0 : expandedKeys.size) {\n      var temp = []; // collect flattened record\n\n      for (var i = 0; i < (data === null || data === void 0 ? void 0 : data.length); i += 1) {\n        var record = data[i];\n        temp.push.apply(temp, _toConsumableArray(flatRecord(record, 0, childrenColumnName, expandedKeys, getRowKey.value, i)));\n      }\n\n      return temp;\n    }\n\n    return data === null || data === void 0 ? void 0 : data.map(function (item, index) {\n      return {\n        record: item,\n        indent: 0,\n        index: index\n      };\n    });\n  });\n  return arr;\n}","map":{"version":3,"names":["_toConsumableArray","computed","flatRecord","record","indent","childrenColumnName","expandedKeys","getRowKey","index","arr","push","key","expanded","has","Array","isArray","i","length","tempArr","apply","useFlattenRecords","dataRef","childrenColumnNameRef","expandedKeysRef","value","data","size","temp","map","item"],"sources":["/Users/cinder/Desktop/Psy+/psyplusweb/node_modules/ant-design-vue/es/vc-table/hooks/useFlattenRecords.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { computed } from 'vue'; // recursion (flat tree structure)\n\nfunction flatRecord(record, indent, childrenColumnName, expandedKeys, getRowKey, index) {\n  var arr = [];\n  arr.push({\n    record: record,\n    indent: indent,\n    index: index\n  });\n  var key = getRowKey(record);\n  var expanded = expandedKeys === null || expandedKeys === void 0 ? void 0 : expandedKeys.has(key);\n\n  if (record && Array.isArray(record[childrenColumnName]) && expanded) {\n    // expanded state, flat record\n    for (var i = 0; i < record[childrenColumnName].length; i += 1) {\n      var tempArr = flatRecord(record[childrenColumnName][i], indent + 1, childrenColumnName, expandedKeys, getRowKey, i);\n      arr.push.apply(arr, _toConsumableArray(tempArr));\n    }\n  }\n\n  return arr;\n}\n/**\n * flat tree data on expanded state\n *\n * @export\n * @template T\n * @param {*} data : table data\n * @param {string} childrenColumnName : 指定树形结构的列名\n * @param {Set<Key>} expandedKeys : 展开的行对应的keys\n * @param {GetRowKey<T>} getRowKey  : 获取当前rowKey的方法\n * @returns flattened data\n */\n\n\nexport default function useFlattenRecords(dataRef, childrenColumnNameRef, expandedKeysRef, getRowKey) {\n  var arr = computed(function () {\n    var childrenColumnName = childrenColumnNameRef.value;\n    var expandedKeys = expandedKeysRef.value;\n    var data = dataRef.value;\n\n    if (expandedKeys === null || expandedKeys === void 0 ? void 0 : expandedKeys.size) {\n      var temp = []; // collect flattened record\n\n      for (var i = 0; i < (data === null || data === void 0 ? void 0 : data.length); i += 1) {\n        var record = data[i];\n        temp.push.apply(temp, _toConsumableArray(flatRecord(record, 0, childrenColumnName, expandedKeys, getRowKey.value, i)));\n      }\n\n      return temp;\n    }\n\n    return data === null || data === void 0 ? void 0 : data.map(function (item, index) {\n      return {\n        record: item,\n        indent: 0,\n        index: index\n      };\n    });\n  });\n  return arr;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}